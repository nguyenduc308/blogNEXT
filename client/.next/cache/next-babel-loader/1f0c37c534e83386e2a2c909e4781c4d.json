{"ast":null,"code":"var _jsxFileName = \"/Users/duclux/Desktop/NEXT SEO/client/components/crud/BlogList.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport { withRouter } from 'next/router';\nimport Link from 'next/link';\nimport { getCookie } from '../../actions/auth';\nimport { getCategories } from '../../actions/category';\nimport { getTags } from '../../actions/tag';\nimport { getBlogsForAd, deleteBlog } from '../../actions/blog';\n\nconst BlogList = () => {\n  const {\n    0: blogs,\n    1: setBlogs\n  } = useState([]);\n  const {\n    0: msg,\n    1: setMsg\n  } = useState('');\n  const token = getCookie('token');\n  const {\n    0: reload,\n    1: setReload\n  } = useState(false);\n\n  const loadBlogs = () => {\n    getBlogsForAd().then(data => {\n      if (data.error) {\n        setMsg(data.error);\n      } else {\n        setBlogs(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadBlogs();\n  }, [reload]);\n\n  const confirmDelete = slug => {\n    const isConfirm = window.confirm('Are you sure ?');\n\n    if (isConfirm) {\n      deleteBlog(slug, token).then(data => {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          setReload(!reload);\n          setMsg(data.msg);\n        }\n      });\n    }\n  };\n\n  const showBlogs = () => blogs && blogs.map((blog, i) => {\n    return __jsx(\"li\", {\n      className: \"mt-2 mb-2 pb-2\",\n      key: i,\n      style: {\n        borderBottom: '1px solid #ccc'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 20\n      }\n    }, __jsx(\"span\", {\n      className: \"btn btn-warning mr-1 ml-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    }, \"Edit\"), __jsx(\"span\", {\n      className: \"btn btn-danger mr-3\",\n      onClick: () => confirmDelete(blog.slug),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }, \"Delete\"), __jsx(Link, {\n      href: `/${blog.slug}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, __jsx(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }\n    }, blog.title)), __jsx(\"span\", {\n      className: \"ml-2\",\n      style: {\n        color: '#ccc'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }, \"Lastest update: \", blog.updatedAt));\n  });\n\n  const showMsg = () => {\n    if (msg) return __jsx(\"p\", {\n      className: \"alert alert-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 24\n      }\n    }, msg);\n  };\n\n  return __jsx(React.Fragment, null, showMsg(), __jsx(\"ol\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, showBlogs()));\n};\n\nexport default BlogList;","map":{"version":3,"sources":["/Users/duclux/Desktop/NEXT SEO/client/components/crud/BlogList.js"],"names":["useState","useEffect","withRouter","Link","getCookie","getCategories","getTags","getBlogsForAd","deleteBlog","BlogList","blogs","setBlogs","msg","setMsg","token","reload","setReload","loadBlogs","then","data","error","confirmDelete","slug","isConfirm","window","confirm","console","log","showBlogs","map","blog","i","borderBottom","title","color","updatedAt","showMsg"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { withRouter } from 'next/router'\nimport Link from 'next/link'\nimport { getCookie} from '../../actions/auth'\nimport { getCategories } from '../../actions/category'\nimport { getTags } from '../../actions/tag'\nimport { getBlogsForAd, deleteBlog } from '../../actions/blog'\nconst BlogList = () => {\n    const [blogs, setBlogs] = useState([])\n    const [msg, setMsg] = useState('')\n    const token = getCookie('token')\n    const [reload, setReload] = useState(false)\n    const loadBlogs = () => {\n        getBlogsForAd()\n            .then(data => {\n                if(data.error) {\n                    setMsg(data.error)\n                } else {\n                    setBlogs(data)\n                }\n            })\n    }\n    useEffect(()=> {\n        loadBlogs()\n    },[reload])\n    const confirmDelete = (slug) => {\n        const isConfirm = window.confirm('Are you sure ?')\n        if(isConfirm) {\n            deleteBlog(slug, token)\n                .then(data=> {\n                    if(data.error) {\n                        console.log(data.error);\n                    } else {\n                        setReload(!reload)\n                        setMsg(data.msg)\n                    }\n                })\n\n        }\n    }\n    const showBlogs = () => (\n        blogs && blogs.map((blog,i) => {\n            return <li className=\"mt-2 mb-2 pb-2\" key={i} style={{borderBottom: '1px solid #ccc'}}>\n                <span className=\"btn btn-warning mr-1 ml-1\">Edit</span>\n                <span \n                className=\"btn btn-danger mr-3\"\n                onClick={()=> confirmDelete(blog.slug)}\n                >\n                    Delete\n                </span>\n                <Link href={`/${blog.slug}`}>\n                    <a>{blog.title}</a>\n                </Link>\n                <span className='ml-2' style={{color:'#ccc'}}>Lastest update: {blog.updatedAt}</span>\n            </li>\n        })\n    )\n    const showMsg = () => {\n        if(msg) return <p className=\"alert alert-warning\">{msg}</p>\n    }\n    return(<>\n        {showMsg()}\n        <ol>\n            {showBlogs()}\n        </ol>\n    </>)\n}\n\nexport default BlogList"]},"metadata":{},"sourceType":"module"}