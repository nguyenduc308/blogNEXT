{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/duclux/Desktop/NEXT SEO/client/components/crud/BlogCreate.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { withRouter } from 'next/router';\nimport { getCookie, isAuth } from '../../actions/auth';\nimport { getCategories } from '../../actions/category';\nimport { getTags } from '../../actions/tag';\nimport '../../node_modules/react-quill/dist/quill.snow.css';\nvar ReactQuill = dynamic(function () {\n  return import('react-quill');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('react-quill')];\n    },\n    modules: ['react-quill']\n  }\n});\n\nvar BlogCreate = function BlogCreate(_ref) {\n  var router = _ref.router;\n\n  var _useState = useState([]),\n      categories = _useState[0],\n      setCategories = _useState[1];\n\n  var _useState2 = useState([]),\n      tags = _useState2[0],\n      setTags = _useState2[1];\n\n  var _useState3 = useState([]),\n      checked = _useState3[0],\n      setChecked = _useState3[1];\n\n  var _useState4 = useState([]),\n      checkedTag = _useState4[0],\n      setCheckedTag = _useState4[1];\n\n  var _useState5 = useState({}),\n      body = _useState5[0],\n      setBody = _useState5[1];\n\n  var _useState6 = useState({\n    error: '',\n    sizeError: '',\n    success: '',\n    formData: '',\n    title: '',\n    hidePublishButton: false\n  }),\n      values = _useState6[0],\n      setValues = _useState6[1];\n\n  var initCategories = function initCategories() {\n    getCategories().then(function (data) {\n      return setCategories(data);\n    })[\"catch\"](function (err) {\n      return setValues(_objectSpread({}, values, {\n        error: err\n      }));\n    });\n  };\n\n  var initTags = function initTags() {\n    getTags().then(function (data) {\n      return setTags(data);\n    })[\"catch\"](function (err) {\n      return setValues(_objectSpread({}, values, {\n        error: err\n      }));\n    });\n  };\n\n  var error = values.error,\n      sizeError = values.sizeError,\n      success = values.success,\n      formData = values.formData,\n      title = values.title,\n      hidePublishButton = values.hidePublishButton;\n\n  var getBlogLocalStorage = function getBlogLocalStorage() {\n    if (true) {\n      if (localStorage && localStorage.getItem('blog')) {\n        setBody(JSON.parse(localStorage.getItem('blog')));\n      } else {\n        return false;\n      }\n    }\n  };\n\n  useEffect(function () {\n    setValues(_objectSpread({}, values, {\n      formData: new FormData()\n    }));\n    getBlogLocalStorage();\n    initTags();\n    initCategories();\n  }, [router]);\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      var value = name === 'photo' ? e.target.file[0] : e.target.value;\n      formData.set(name, value);\n      setValues(_objectSpread({}, values, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"formData\", formData), _defineProperty(_objectSpread2, \"error\", ''), _objectSpread2)));\n    };\n  };\n\n  var handleBody = function handleBody(e) {\n    setBody(e);\n    formData.set('body', e);\n\n    if (localStorage) {\n      localStorage.setItem('blog', JSON.stringify(e));\n    }\n  };\n\n  var createBlogForm = function createBlogForm() {\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, __jsx(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      value: title,\n      placeholder: \"Enter title\",\n      className: \"form-control\",\n      onChange: handleChange('title'),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, __jsx(ReactQuill, {\n      modules: BlogCreate.modules,\n      formats: BlogCreate.formats,\n      value: body,\n      placeholder: \"Type songthing\",\n      onChange: handleBody,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, \"Publish\")));\n  };\n\n  var handleToggle = function handleToggle(c) {\n    setValues(_objectSpread({}, values, {\n      error: ''\n    }));\n    var clickedCategory = checked.indexOf(c);\n\n    var all = _toConsumableArray(checked);\n\n    if (clickedCategory === -1) {\n      all.push(c);\n    } else {\n      all.splice(clickedCategory, 1);\n    }\n  };\n\n  var showCategories = function showCategories() {\n    return categories && categories.map(function (c, i) {\n      return __jsx(\"li\", {\n        key: i,\n        className: \"list-unstyled\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 24\n        }\n      }, __jsx(\"input\", {\n        onChange: handleToggle(c._id),\n        type: \"checkbox\",\n        className: \"mr-2\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }), __jsx(\"label\", {\n        htmlFor: \"\",\n        className: \"form-check-label\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }\n      }, c.name));\n    });\n  };\n\n  var showTags = function showTags() {\n    return tags && tags.map(function (t, i) {\n      return __jsx(\"li\", {\n        key: i,\n        className: \"list-unstyled\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 24\n        }\n      }, __jsx(\"input\", {\n        onChange: handleToggle(t._id),\n        type: \"checkbox\",\n        className: \"mr-2\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }\n      }), __jsx(\"label\", {\n        htmlFor: \"\",\n        className: \"form-check-label\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }\n      }, t.name));\n    });\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, createBlogForm()), __jsx(\"div\", {\n    className: \"col-md-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"categories-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, __jsx(\"h5\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, \"Categories\"), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }), __jsx(\"ul\", {\n    style: {\n      maxHeight: '400px',\n      overflowY: 'scroll'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, showCategories())), __jsx(\"div\", {\n    className: \"tag-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, __jsx(\"h5\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 25\n    }\n  }, \"Tags\"), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 25\n    }\n  }), __jsx(\"ul\", {\n    style: {\n      maxHeight: '400px',\n      overflowY: 'scroll'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, showTags())))));\n};\n\nexport default withRouter(BlogCreate);\nBlogCreate.modules = {\n  toolbar: [[{\n    header: '1'\n  }, {\n    header: '2'\n  }, {\n    header: [3, 4, 5, 6]\n  }, {\n    font: []\n  }], [{\n    size: []\n  }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], ['link', 'image', 'video'], ['clean'], ['code-block']]\n};\nBlogCreate.formats = ['header', 'font', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'link', 'image', 'video', 'code-block'];","map":{"version":3,"sources":["/Users/duclux/Desktop/NEXT SEO/client/components/crud/BlogCreate.js"],"names":["Link","useState","useEffect","Router","dynamic","withRouter","getCookie","isAuth","getCategories","getTags","ReactQuill","ssr","BlogCreate","router","categories","setCategories","tags","setTags","checked","setChecked","checkedTag","setCheckedTag","body","setBody","error","sizeError","success","formData","title","hidePublishButton","values","setValues","initCategories","then","data","err","initTags","getBlogLocalStorage","localStorage","getItem","JSON","parse","FormData","handleSubmit","e","preventDefault","handleChange","name","value","target","file","set","handleBody","setItem","stringify","createBlogForm","modules","formats","handleToggle","c","clickedCategory","indexOf","all","push","splice","showCategories","map","i","_id","showTags","t","maxHeight","overflowY","toolbar","header","font","size","list"],"mappings":"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","sourcesContent":["import Link from 'next/link'\nimport { useState, useEffect } from 'react'\nimport Router from 'next/router'\nimport dynamic from 'next/dynamic'\nimport { withRouter } from 'next/router'\nimport { getCookie, isAuth } from '../../actions/auth'\nimport { getCategories } from '../../actions/category'\nimport { getTags } from '../../actions/tag'\nimport '../../node_modules/react-quill/dist/quill.snow.css'\nconst ReactQuill = dynamic(()=> import('react-quill'), {ssr: false});\nconst BlogCreate = ({router}) => {\n    const [categories, setCategories] = useState([])\n    const [tags, setTags] = useState([])\n    const [checked, setChecked] = useState([])\n    const [checkedTag, setCheckedTag] = useState([])\n    const [body, setBody] = useState({})\n    const [values, setValues] = useState({\n        error: '',\n        sizeError: '',\n        success: '',\n        formData: '',\n        title: '',\n        hidePublishButton: false\n    })\n    const initCategories = () => {\n        getCategories()\n            .then(data => setCategories(data))\n            .catch(err => setValues({...values, error: err}))\n    }\n    const initTags = () => {\n        getTags()\n            .then(data => setTags(data))\n            .catch(err => setValues({...values, error: err}))\n    }\n    const { error, sizeError, success, formData, title, hidePublishButton } = values;\n    const getBlogLocalStorage = () => {\n        if(typeof window !== 'undefined') {\n            if(localStorage && localStorage.getItem('blog')) {\n                setBody(JSON.parse(localStorage.getItem('blog')))\n            } else {\n                return false;\n            }\n        }\n    }\n    useEffect(() => {\n        setValues({\n            ...values,\n            formData: new FormData(),\n        })\n        getBlogLocalStorage()\n        initTags()\n        initCategories()\n    }, [router])\n    const handleSubmit = e => {                \n        e.preventDefault()\n    }\n    const handleChange = name => e => {\n        const value = name === 'photo' ? e.target.file[0] : e.target.value\n        formData.set(name, value)\n        setValues({\n            ...values,\n            [name]: value,\n            formData,\n            error:''\n        })\n    }\n    const handleBody =  e => {\n        setBody(e)\n        formData.set('body', e);\n        if(localStorage) {\n            localStorage.setItem('blog', JSON.stringify(e))\n        }\n    }\n    const createBlogForm = () => {\n        return(\n            <form onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                    <input \n                    type=\"text\" \n                    name=\"title\"\n                    value={title}\n                    placeholder=\"Enter title\"\n                    className=\"form-control\"\n                    onChange={handleChange('title')}\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <ReactQuill\n                    modules={BlogCreate.modules}\n                    formats={BlogCreate.formats}\n                    value={body}\n                    placeholder=\"Type songthing\"\n                    onChange={handleBody}\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <button type=\"submit\" className=\"btn btn-primary\">\n                        Publish\n                    </button>\n                </div>\n            </form>\n        )\n    }\n    const handleToggle = c => {\n        setValues({\n            ...values,\n            error: ''\n        })\n        const clickedCategory = checked.indexOf(c);\n        let all = [...checked]\n        if(clickedCategory === -1) {\n            all.push(c)\n        } else {\n            all.splice(clickedCategory, 1)\n        }\n    }\n    const showCategories = () => {\n        return (\n            categories && categories.map((c,i) => {\n                return <li key={i} className=\"list-unstyled\">\n                    <input onChange={handleToggle(c._id)} type=\"checkbox\" className=\"mr-2\"/>\n                    <label htmlFor=\"\" className=\"form-check-label\">\n                        {c.name}\n                    </label>\n                </li>\n            })\n        )\n    }\n    const showTags = () => {\n        return (\n            tags && tags.map((t,i) => {\n                return <li key={i} className=\"list-unstyled\">\n                    <input onChange={handleToggle(t._id)} type=\"checkbox\" className=\"mr-2\"/>\n                    <label htmlFor=\"\" className=\"form-check-label\">\n                        {t.name}\n                    </label>\n                </li>\n            })\n        )\n    }\n    return(\n        <>\n            <div className=\"row\">\n                <div className=\"col-md-8\">\n                    {createBlogForm()}\n                </div>\n                <div className=\"col-md-4\">\n                    <div className=\"categories-list\">\n                        <h5>Categories</h5>\n                        <hr />\n                        <ul style={{\n                            maxHeight: '400px',\n                            overflowY: 'scroll'\n                        }}>\n                            {showCategories()}\n                        </ul>\n                    </div>\n                    <div className=\"tag-list\">\n                        <h5>Tags</h5>\n                        <hr/>\n                        <ul style={{\n                            maxHeight: '400px',\n                            overflowY: 'scroll'\n                        }}>\n                            {showTags()}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}\nexport default withRouter(BlogCreate);\n\nBlogCreate.modules = {\n    toolbar: [\n        [{ header: '1' }, { header: '2' }, { header: [3, 4, 5, 6] }, { font: [] }],\n        [{ size: [] }],\n        ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n        [{ list: 'ordered' }, { list: 'bullet' }],\n        ['link', 'image', 'video'],\n        ['clean'],\n        ['code-block']\n    ]\n};\nBlogCreate.formats = [\n    'header',\n    'font',\n    'size',\n    'bold',\n    'italic',\n    'underline',\n    'strike',\n    'blockquote',\n    'list',\n    'bullet',\n    'link',\n    'image',\n    'video',\n    'code-block'\n];"]},"metadata":{},"sourceType":"module"}